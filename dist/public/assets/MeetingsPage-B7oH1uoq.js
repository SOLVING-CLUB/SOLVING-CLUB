import{c as L,u as E,g as P,r as i,t as p,j as e,D,B as a,L as n,P as j,C as g,a as f,V as N,b as S,d as B,e as H,f as T,U as y,h as U,i as V}from"./index-BeoiXK9q.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],F=L("copy",z);function $(){const[,b]=E(),o=P(),[l,x]=i.useState([]),[w,c]=i.useState(!0);i.useEffect(()=>{_()},[]);const _=async()=>{var s;try{const{data:{user:d}}=await o.auth.getUser();if(!d){c(!1);return}const{data:h,error:r}=await o.from("meetings").select(`
          *,
          projects:project_id(name)
        `).order("created_at",{ascending:!1});if(r){if(r.code==="PGRST116"||(s=r.message)!=null&&s.includes("does not exist")){console.warn("Meetings table does not exist yet. Please run the database schema."),x([]),c(!1);return}throw r}if(h){const k=h.map(t=>{var m,u;return{id:t.id,title:t.title,description:t.description,meeting_code:t.meeting_code,status:t.status,scheduled_at:t.scheduled_at,started_at:t.started_at,host_id:t.host_id,project_id:t.project_id,project_name:((m=t.projects)==null?void 0:m.name)||((u=t.projects)==null?void 0:u.name),participant_count:0}});x(k)}}catch(d){console.error("Error loading meetings:",d),p.error("Error","Failed to load meetings")}finally{c(!1)}},C=s=>{navigator.clipboard.writeText(s),p.success("Copied!","Meeting code copied to clipboard")},v=s=>{switch(s){case"active":return"bg-green-500";case"scheduled":return"bg-blue-500";case"ended":return"bg-gray-500";case"cancelled":return"bg-red-500";default:return"bg-gray-500"}},M=s=>{if(!s)return"Not scheduled";try{return V(new Date(s),"MMM dd, yyyy HH:mm")}catch{return s}};return e.jsx(D,{children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Meetings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Create and manage video meetings with your team"})]}),e.jsx(a,{asChild:!0,children:e.jsxs(n,{href:"/dashboard/meetings/create",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"New Meeting"]})})]}),w?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading meetings..."})}):l.length===0?e.jsx(g,{children:e.jsxs(f,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(N,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No meetings yet"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create your first meeting to start collaborating with your team"}),e.jsx(a,{asChild:!0,children:e.jsxs(n,{href:"/dashboard/meetings/create",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Create Meeting"]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(s=>e.jsxs(g,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(B,{className:"text-lg",children:s.title}),e.jsx(H,{className:v(s.status),children:s.status})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:s.description})]}),e.jsxs(f,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx("span",{children:M(s.scheduled_at)})]}),s.project_name&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{children:s.project_name})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.participant_count," participant",s.participant_count!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:"Code: "}),e.jsx("code",{className:"font-mono text-sm bg-muted px-2 py-1 rounded",children:s.meeting_code}),e.jsx(a,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>C(s.meeting_code),children:e.jsx(F,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:s.status==="active"||s.status==="scheduled"?e.jsx(a,{asChild:!0,className:"flex-1",onClick:()=>b(`/dashboard/meetings/${s.id}`),children:e.jsxs(n,{href:`/dashboard/meetings/${s.id}`,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),s.status==="active"?"Join":"Start"]})}):e.jsx(a,{variant:"outline",className:"flex-1",disabled:!0,children:"Meeting Ended"})})]})]},s.id))})]})})}export{$ as default};
