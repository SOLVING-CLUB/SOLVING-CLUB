import{a as p,r as l,s as M,e as x,b as h,c as S,d as f,f as D,j as e,C as E,g as T,h as W,i as b,B as o,k as d,l as O,m as z,n as B,o as j,p as _,q as P,S as q,t as I,u as R}from"./index-Cd3ReG0q.js";function V(s,n,t){return p(s,-1,t)}function F(){const[s,n]=l.useState(new Date),[t,c]=l.useState("month"),[g,v]=l.useState([]);l.useEffect(()=>{k()},[s,t]);const k=async()=>{const{data:a}=await M.from("project_tasks").select("id, title, due_date, project:projects(name)").not("due_date","is",null),m=(a||[]).map(r=>({id:r.id,title:r.title,date:new Date(r.due_date),type:"task",color:"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800",metadata:r}));v([...m])},w=()=>{n(t==="month"?I(s,1):p(s,1))},N=()=>{n(t==="month"?R(s):V(s))},y=t==="month"?x({start:f(D(s)),end:h(S(s))}):x({start:f(s),end:h(s)});return e.jsxs(E,{className:"h-[calc(100vh-12rem)] flex flex-col",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(W,{className:"text-2xl font-bold",children:b(s,"MMMM yyyy")}),e.jsxs("div",{className:"flex items-center rounded-md border bg-muted/50 p-1",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>c("month"),className:d(t==="month"&&"bg-background shadow-sm"),children:"Month"}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>c("week"),className:d(t==="week"&&"bg-background shadow-sm"),children:"Week"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{variant:"outline",size:"icon",onClick:N,children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(o,{variant:"outline",onClick:()=>n(new Date),children:"Today"}),e.jsx(o,{variant:"outline",size:"icon",onClick:w,children:e.jsx(z,{className:"h-4 w-4"})})]})]}),e.jsx(B,{className:"p-0 flex-1 overflow-y-auto",children:e.jsxs("div",{className:d("grid h-full",t==="month"?"grid-cols-7 grid-rows-5":"grid-cols-7"),children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-muted-foreground border-b border-r last:border-r-0 bg-muted/20",children:a},a)),y.map((a,m)=>{const r=g.filter(i=>j(i.date,a)),u=j(a,new Date),C=_(a,s);return e.jsxs("div",{className:d("min-h-[100px] p-2 border-b border-r last:border-r-0 relative group transition-colors hover:bg-muted/10",!C&&"bg-muted/5 text-muted-foreground",t==="week"&&"h-full min-h-[500px]"),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:d("text-sm font-medium h-7 w-7 flex items-center justify-center rounded-full",u?"bg-primary text-primary-foreground":"text-muted-foreground"),children:b(a,"d")}),t==="week"&&u&&e.jsx(P,{variant:"outline",className:"text-xs",children:"Today"})]}),e.jsx("div",{className:"space-y-1",children:r.map(i=>e.jsxs("div",{className:d("w-full text-left text-xs p-1.5 rounded-md border mb-1 truncate flex items-center gap-1.5",i.color),children:[e.jsx(q,{className:"h-3 w-3 shrink-0"}),e.jsx("span",{className:"truncate font-medium",children:i.title})]},i.id))})]},a.toString())})]})})]})}function L(){return e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Calendar"}),e.jsx("p",{className:"text-muted-foreground",children:"View your project deadlines and tasks in one place."})]})}),e.jsx(F,{})]})}export{L as default};
